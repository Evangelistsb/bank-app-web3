(this["webpackJsonpbank-dapp"]=this["webpackJsonpbank-dapp"]||[]).push([[0],{1016:function(e,t,n){"use strict";n.r(t);var a=n(14),c=n(302),r=n.n(c),s=n(0),i=n(12),u=n(101),o=(n(495),n(230)),p=n(490),l=n(65),d=n.n(l),f=n(22),b="0xb62632cd205304abF772F4d044889bD5BBe1B56b";var j=function(){var e=Object(o.useCelo)(),t=e.connect,n=e.address,c=e.performActions,r=e.getConnectedKit,l=Object(a.useState)(""),j=Object(u.a)(l,2),h=j[0],m=j[1],O=Object(a.useState)(0),y=Object(u.a)(O,2),v=y[0],x=y[1],w=Object(a.useState)(""),g=Object(u.a)(w,2),k=g[0],T=g[1],C=Object(a.useState)(),N=Object(u.a)(C,2),S=N[0],B=N[1],A=Object(a.useState)(""),D=Object(u.a)(A,2),F=D[0],L=D[1],M=Object(a.useState)(0),E=Object(u.a)(M,2),R=E[0],P=E[1],J=Object(a.useState)(0),W=Object(u.a)(J,2),I=W[0],K=W[1],$=Object(a.useState)(0),q=Object(u.a)($,2),z=q[0],G=q[1],H=Object(a.useState)(""),Q=Object(u.a)(H,2),U=Q[0],V=Q[1];function X(){return X=Object(i.a)(Object(s.a)().mark((function e(){var a,c,i;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.next=4,r();case 4:return a=e.sent,e.next=7,a.connection.getBalance(n);case 7:c=e.sent,i=new d.a(c).shiftedBy(-18).toFixed(2),m(n),x(i);case 11:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Y(){return(Y=Object(i.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:t=e.sent,n=new t.connection.web3.eth.Contract(p,b),T(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(i.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.methods.accountDetails().call();case 3:t=e.sent,n={id:t[0],username:t[1],balance:t[2],lastDeposit:t[3],lastTransfer:t[4]},B(n),console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function _(){return _=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.methods.createAccount(F).send({from:t.connection.defaultAccount});case 3:alert("Successful! Reload page to see changes"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function ee(){return ee=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.methods.deposit().send({from:t.connection.defaultAccount,value:new d.a(I).shiftedBy(18)});case 3:alert("Success! Refresh page to see changes"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(){return te=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.methods.withdraw(new d.a(R).shiftedBy(18)).send({from:t.connection.defaultAccount});case 3:alert("Success! Refresh page to see changes"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function ne(){return ne=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.methods.transfer(U,new d.a(z).shiftedBy(18)).send({from:t.connection.defaultAccount});case 3:alert("Success! Refresh page to see changes"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}return Object(a.useEffect)((function(){!function(){Y.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){k&&h&&function(){Z.apply(this,arguments)}()}),[k,h]),Object(f.jsxs)("div",{className:"App",children:[h?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"address",children:["Address: ",h]}),Object(f.jsxs)("div",{className:"address",children:["Bal: ",v," CELO"]})]}):Object(f.jsx)("div",{className:"connect",onClick:function(){return function(){return X.apply(this,arguments)}()},children:"Connect"}),0==(null===S||void 0===S?void 0:S.id)?Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{value:F,onChange:function(e){return L(e.target.value)},placeholder:"Enter your username"}),Object(f.jsx)("div",{onClick:function(){return function(){return _.apply(this,arguments)}()},className:"connect",children:"Sign up "})]}):Object(f.jsxs)("div",{className:"m",children:[Object(f.jsxs)("div",{className:"left-nav",children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{className:"input",children:[Object(f.jsx)("span",{children:"Receiver:"}),Object(f.jsx)("input",{value:U,onChange:function(e){return V(e.target.value)},placeholder:"0x12345",type:"text"}),Object(f.jsx)("span",{children:"Amount:"}),Object(f.jsx)("input",{value:z,onChange:function(e){return G(e.target.value)},placeholder:"1 CELO",type:"number"})]}),Object(f.jsx)("p",{children:"*Before you transfer, please ensure the receiver is registered on the app"}),Object(f.jsx)("div",{onClick:function(){return function(){return ne.apply(this,arguments)}()},className:"button button-transfer",children:"Transfer"})]}),Object(f.jsxs)("div",{className:"input",children:[Object(f.jsx)("span",{children:"Amount:"}),Object(f.jsx)("input",{value:R,onChange:function(e){return P(e.target.value)},placeholder:"amount to withdraw",type:"number"})]}),Object(f.jsx)("div",{onClick:function(){return function(){return te.apply(this,arguments)}()},className:"button button-withdraw",children:"Withdraw"})]}),Object(f.jsxs)("div",{className:"main",children:[Object(f.jsxs)("p",{children:["Welcome, ",null===S||void 0===S?void 0:S.username]}),Object(f.jsxs)("div",{className:"main-dashboard",children:[Object(f.jsxs)("div",{className:"main-info",children:[Object(f.jsxs)("div",{children:["Last deposit: ",new Date(1e3*(null===S||void 0===S?void 0:S.lastDeposit)).toLocaleString()]}),Object(f.jsxs)("div",{children:["Last transfer: ",new Date(1e3*(null===S||void 0===S?void 0:S.lastTransfer)).toLocaleString()]})]}),Object(f.jsxs)("div",{className:"main-bal",children:[Object(f.jsx)("p",{children:"Bal:"}),Object(f.jsxs)("div",{children:["$",Number(new d.a(null===S||void 0===S?void 0:S.balance).shiftedBy(-18).toFixed(2))]})]})]})]}),Object(f.jsxs)("div",{className:"right-nav",children:[Object(f.jsxs)("div",{className:"input",children:[Object(f.jsx)("span",{children:"Amount:"}),Object(f.jsx)("input",{value:I,onChange:function(e){return K(e.target.value)},placeholder:"deposit amount. e.g 1 CELO",type:"number"})]}),Object(f.jsx)("div",{onClick:function(){return function(){return ee.apply(this,arguments)}()},className:"button button-deposit",children:"Deposit"}),Object(f.jsx)("div",{className:"button",children:"..."})]})]})]})},h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1021)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};n(1011),n(1012);r.a.render(Object(f.jsx)(o.CeloProvider,{dapp:{name:"Bank App",description:"Access to banking on-chain",url:""},connectionModal:{title:Object(f.jsx)("span",{children:"Please connect your wallet to continue"})},children:Object(f.jsx)(a.StrictMode,{children:Object(f.jsx)(j,{})})}),document.getElementById("root")),h()},490:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"}],"name":"CreateAccount","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdraw","type":"event"},{"inputs":[],"name":"accountDetails","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"checkBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"createAccount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"deposit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"payable","type":"function"}]')},495:function(e,t,n){},524:function(e,t){},529:function(e,t){},548:function(e,t){},550:function(e,t){},566:function(e,t){},621:function(e,t){},623:function(e,t){},633:function(e,t){},635:function(e,t){},660:function(e,t){},662:function(e,t){},663:function(e,t){},669:function(e,t){},682:function(e,t){},694:function(e,t){},697:function(e,t){},701:function(e,t){},711:function(e,t){},787:function(e,t){},858:function(e,t){},960:function(e,t){}},[[1016,1,2]]]);
//# sourceMappingURL=main.75cfcdf9.chunk.js.map